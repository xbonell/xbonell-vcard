// Hole element - contains the canvas, masked by logo clip-path
#hole {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  // Use dvh (dynamic viewport height) for iOS Safari compatibility
  // Falls back to 100% for browsers that don't support dvh
  height: 100dvh;
  z-index: -1; // Behind the main article
  background-color: var(--color-backstage);
  // iOS Safari fix: force GPU layer to prevent repositioning during scroll
  transform: translateZ(0);
  -webkit-transform: translateZ(0);
  -webkit-backface-visibility: hidden;
  backface-visibility: hidden;
  // Logo mask - clip-path is set dynamically via JavaScript
  // Uses CSS clip-path: path() with the logo shape, covering the viewport

  & > canvas {
    width: 100%;
    height: 100%;
    opacity: 0.5;
    position: absolute;
    top: 0;
    left: 0;
    z-index: 0;
    filter: blur(2px);
    // iOS Safari fix: force GPU layer for canvas as well
    transform: translateZ(0);
    -webkit-transform: translateZ(0);
  }
}

// Shadow element - sits on top of hole canvas, creates inner shadow from mask edges
// Also clipped by the same clip-path so shadow only appears inside the mask
#hole-shadow {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  // Use dvh (dynamic viewport height) for iOS Safari compatibility
  height: 100dvh;
  z-index: 0; // Above #hole but below article (article has z-index: 1)
  color: var(--color-hole-shadow); // Dark shadow in both modes
  filter: blur(20px);
  pointer-events: none;
  transition: color var(--theme-transition);
  // iOS Safari fix: force GPU layer to prevent repositioning during scroll
  transform: translateZ(0);
  -webkit-transform: translateZ(0);
  -webkit-backface-visibility: hidden;
  backface-visibility: hidden;
  // SVG with inverted path (rectangle minus logo) is injected via JavaScript
  // clip-path is applied via JavaScript to match #hole
}

[data-theme="light"] {
  #hole > canvas {
    opacity: 0.5;
  }
}